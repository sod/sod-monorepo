<ng-container *ngIf="{edit: edit$ | async} as state">
    <nz-card
        [nzTitle]="production | productionTitle"
        nzSize="small"
        nzBorderless
        class="mb-3"
        [class.shadow]="state.edit?.index === production.index"
        [nzExtra]="extraTemplate"
    >
        <div class="row position-relative">
            <div class="text-center arrow-center" *ngIf="production.recipe.inputs.length && production.recipe.outputs.length">
                <i nz-icon nzType="arrow-right" nzTheme="outline"></i>
            </div>
            <div class="col-6">
                <app-satisfactory-items [values]="production.recipe.inputs" align="left"></app-satisfactory-items>
            </div>
            <div class="col-6">
                <app-satisfactory-items [values]="production.recipe.outputs" align="right"></app-satisfactory-items>
            </div>
        </div>
    </nz-card>

    <ng-template #extraTemplate>
        <button
            nz-button
            [nzType]="state.edit && production.index === state.edit.index ? 'primary' : 'link'"
            (click)="edit(production.index)"
        >
            <i nz-icon nzType="edit" nzTheme="outline"></i>
            Edit
        </button>
    </ng-template>
</ng-container>
