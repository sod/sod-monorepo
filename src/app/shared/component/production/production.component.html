<div
    class="sod-shadow-lg rounded-3 bg-dark-subtle"
    *ngIf="production.recipe.outputs.length || production.recipe.inputs.length ? 'active' : 'new' as current"
>
    <div [style.opacity]="current === 'active' ? 1 : 0.5">
        <app-production-input-or-output [production]="production" [target]="'inputs'"></app-production-input-or-output>
    </div>

    <app-production-input-or-output
        [production]="production"
        [target]="'outputs'"
        [autofocus]="current === 'new'"
    ></app-production-input-or-output>

    <div *ngIf="current === 'active'" class="p-3">
        <h6>Modifier</h6>

        <app-input label="Machines" class="mb-2">
            <input
                appInputControl
                type="number"
                min="1"
                [ngModel]="production.machines"
                (ngModelChange)="updateProduction(production, {machines: $event || undefined})"
            />
        </app-input>
        <app-input label="% from Slugs" class="mb-2">
            <input
                appInputControl
                type="number"
                min="50"
                max="250"
                step="50"
                [ngModel]="production.clockSpeed1"
                (ngModelChange)="updateProduction(production, {clockSpeed1: $event || undefined})"
            />
        </app-input>
        <app-input label="% from MK Upgrade">
            <input
                appInputControl
                type="number"
                min="50"
                step="50"
                [ngModel]="production.clockSpeed2"
                (ngModelChange)="updateProduction(production, {clockSpeed2: $event || undefined})"
            />
        </app-input>
    </div>

    <div class="d-flex align-items-end p-3">
        <button class="btn btn-outline-danger" (click)="removeProduction(production)">
            <i class="bi bi-trash-fill"></i>
            Remove
        </button>
    </div>
</div>
